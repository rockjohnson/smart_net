/*
 * io_task.cpp
 *
 *  Created on: Nov 30, 2010
 *      Author: rock
 */

#include "io_task.h"

namespace nm_framework
{

	CIoTask::CIoTask()
	{
		// TODO Auto-generated constructor stub
	}

	CIoTask::~CIoTask()
	{
		// TODO Auto-generated destructor stub
	}

	void CIoTask::exec()
	{
		///create io event notify mechanism obj.
#if __PLATFORM__ == __PLATFORM_LINUX__
		m_pIoEvtNotify = new CEpoll;
#elif __PLATFORM__ == __PLATFORM_WINDOWS__
		m_pIoEvtNotify = new CSelect;
#endif
		int32_t iRet = m_pIoEvtNotify->init();
		if (0 > iRet)
		{
			TRACE_LAST_ERR(IO_LOG, m_pIoEvtNotify->init());
			return;
		}

		///main logic circle
		while (!is_stopped())
		{

		}
	}

}
